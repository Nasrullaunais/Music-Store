<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Music Store</title>
    <link rel="stylesheet" th:href="@{/a.css}" />
    <style>
        .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}
        .card{border:1px solid #ddd;border-radius:10px;overflow:hidden;background:#fff;box-shadow:0 2px 8px rgba(0,0,0,.06)}
        .card img{width:100%;height:160px;object-fit:cover}
        .card-body{padding:12px}
        .title{font-weight:700;margin:0 0 6px}
        .price{color:#1b7c20;font-weight:600}
        header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
        .topnav a{margin-right:10px}
        audio{width:100%;margin-top:8px}
    </style>
</head>
<body>
<header>
    <h1>Music Store</h1>
    <nav class="topnav">
        <a th:href="@{/}">Home</a>
        <a th:href="@{/cart}">Cart</a>
        <a th:href="@{/login}">Login</a>
    </nav>
</header>
<section class="grid">
    <div class="card" th:each="m : ${musicPage}">
        <img th:src="${m.imageUrl} ?: 'https://picsum.photos/400/200?music'" alt="cover"/>
        <div class="card-body">
            <h3 class="title" th:text="${m.name}">Title</h3>
            <div th:text="${m.artist}">Artist</div>
            <div class="price" th:text="${#numbers.formatDecimal(m.price,1,2)}">$0.00</div>
            <audio controls th:if="${m.audioFilePath}" th:src="@{/${m.audioFilePath}}"></audio>
            <form th:action="@{'/cart/add/' + ${m.id}}" method="post" style="margin-top:8px">
                <input type="number" name="quantity" min="1" value="1" />
                <button type="submit">Add to cart</button>
            </form>
            <a th:href="@{'/music/' + ${m.id}}">Details</a>
        </div>
    </div>
</section>
</body>
</html>
